<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Recipes List</title>
</head>
<body>
<h1>Recipes List</h1>
<a th:href="@{'/recipe/' + ${idmeal}}">
<div id="recipes"></div>
</a>
<script>

  const alphabet = 'abcdefghijklmnopqrstuvwxyz'.split('').sort();
  const recipesContainer = document.getElementById('recipes');
  alphabet.forEach(letter => {
    fetch(`https://www.themealdb.com/api/json/v1/1/search.php?f=${letter}`)
            .then(response => response.json())
            .then(data => {
              const meals = data.meals;
              meals.forEach(meal => {
                const card = document.createElement('div');
                card.classList.add('card');
                const image = document.createElement('img');
                image.src = meal.strMealThumb;
                image.alt = meal.strMeal;
                const heading = document.createElement('h2');
                heading.innerText = meal.strMeal;
                const ID = document.createElement('h3');
                ID.innerText = meal.idMeal;
                const ingredients = document.createElement('ul');
                for (let i = 1; i <= 20; i++) {const ingredient = meal[`strIngredient${i}`] ;if (ingredient) {
                    const listItem = document.createElement('li');
                    listItem.innerText = ingredient;
                    ingredients.appendChild(listItem);
                  }
                }
                const instructions = document.createElement('p');
                instructions.innerText = meal.strInstructions;

                card.appendChild(ID);
                card.appendChild(heading);
                card.appendChild(image);


                recipesContainer.appendChild(card);
              });
            })
            .catch(error => console.error(error));
  });
</script>
</body>
</html>